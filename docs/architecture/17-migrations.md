# 17. MongoDB migrations

У вас уже есть механизм миграций при старте сервиса. Требования:

## Порядок запуска
- На старте сервис:
  1) подключается к MongoDB
  2) выполняет миграции (создание коллекций/индексов)
  3) поднимает gRPC/HTTP listeners
- readiness становится OK только после шага 2.

## Идемпотентность миграций
- Каждая миграция должна быть безопасна при повторном запуске.
- Таблица/коллекция `migrations` хранит применённые версии.

## Индексы
- Индексы — через миграции, не “в коде” на каждый старт.
- Проверять, что индексы созданы, иначе read/write деградируют.

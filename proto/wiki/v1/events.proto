syntax = "proto3";

// Wiki outbox event payloads.
package wiki.v1;

import "google/protobuf/timestamp.proto";
import "wiki/v1/messages.proto";

option go_package = "github.com/invenlore/proto/pkg/wiki/v1;wikiv1";

// PageRevisionCreated is emitted when a new revision is created.
message PageRevisionCreated {
	// Page id.
	string page_id = 1;
	// Revision id.
	string revision_id = 2;
	// Space id.
	string space_id = 3;
	// Page slug.
	string slug = 4;
	// Page title.
	string title = 5;
	// Author id.
	string author_id = 6;
	// Event creation timestamp.
	google.protobuf.Timestamp created_at = 7;
}

// PageAclChanged is emitted when page ACL snapshot changes.
message PageAclChanged {
	// Page id.
	string page_id = 1;
	// Updated permission snapshot.
	PermissionSnapshot perms = 2;
	// Event creation timestamp.
	google.protobuf.Timestamp created_at = 3;
}
